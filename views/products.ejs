<style>
    .page-horizontal-slider {
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        overflow-y: visible;
        overflow-x: scroll;
        max-width: 100vw;    
        width: 100vw;
        margin: 0 auto;
        margin-bottom: 30px;
        padding: 20px;
        padding-bottom: 40px;
        padding-top: 100px;
    }
    .product-card-container {
        max-width: 300px;
        min-width: 300px;
        margin-right: 10px;
        margin-left: 10px;
        /* height: 275px; */
    }
    
    .product-card {
        background-color: rgba(255, 127, 80, 0.5);
        border: solid 3px coral;
        box-shadow: 0 22px 12px rgba(0, 0, 0, 0.4);
        border-radius: 24px;
        padding: 2px;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
    }

    .product-image-container {
        padding: 2px;
        max-width: 300px;
    }

    .product-image img {
        max-width: 100%;
        height: 200px;
        transition: ease-in-out 1.75s;
        filter: drop-shadow(0 -5px 6px rgba(0, 0, 0, 0.75));
    }
    .product-image img:hover {
        transform: scale(1.5) translateY(-25px);
        filter: drop-shadow(0 50px 32px rgba(0, 0, 0, 0.75));
    }

    .product-data {
        width: 100%;
        margin-bottom: 20px;
        border-top: solid 2px coral;
        box-shadow: 0 -6px 8px rgba(0, 0, 0, 0.4);
        
    }
    .product-name {
        padding: 8px;
        
    }
    .product-name h6 {
        text-align: center;
        font-size: 2.5rem;
        color: #fff;
        font-weight: lighter;
        color: rgb(100, 246, 67);
        text-shadow: 0 0 2px #fff;

    }

    .product-price {
        text-align: center;
    }
    .product-data a {
        color: #fff;
        text-decoration: none;
        font-size: 1.5rem;
    }


    .titlting-card-container {
        /* background-color: lime; */
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        align-items: flex-start;
        justify-content: space-evenly;
    }

    .tilting-card-body {
        display: grid;
        place-content: center;
        text-align: center;
        /* border: solid 1px lime; */
        position: absolute;
        inset: 0;
        background-image: url('/images/billboards/1.jpg');
        background-size: cover;
        border-radius: 12px;
        background-repeat: no-repeat;
        background-position: center;
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.4);
        color: coral;
        border: solid 1px lime;
        max-height: 90vh;
        
    }
    .mouse-position-tracker {
        position: absolute;
        width: calc(100% / 3);
        height: calc(100% / 3);
        z-index: 2;
        /* border: solid 1px red; */
    }

    .mouse-position-tracker:nth-child(3n - 2) {
        left: 0;
    }
    .mouse-position-tracker:nth-child(3n - 1) {
        left: calc(100% / 3);
    }
    .mouse-position-tracker:nth-child(3n) {
        right: 0;
    }
    
    .mouse-position-tracker:nth-child(n + 4):nth-child(-n + 6) {
        top: calc(100% / 3);
    }
    .mouse-position-tracker:nth-child(n + 7):nth-child(-n + 9) {
        bottom: 0;
    }
    
    .tilting-card-wrapper {
        position: relative;
        width: 15rem;
        aspect-ratio: 1 / 2;
        margin-left: 10px;
        margin-right: 10px;
        margin-bottom: 30px;
    }
    
    .tilting-card-body > :where(h1, p) {
        background-color: rgba(255, 255, 255, 0.25);
        backdrop-filter: blur(5px);
        padding: 0.2rem;
        margin: 0;
        border-radius: 8px;
        margin-top: 50px;
        box-shadow: 0 8px 12px rgba(0, 0, 0, 0.4);
        border: solid 2px coral;
    }
    
    
    
    .tilting-card-body {
        --perspective: 500px;
        --rotationX: 0;
        --rotationY: 0;
        --rotationZ: 0;
        --angle: 10deg;

        transform: perspective(var(--perspective)) rotateX(var(--rotationX)) rotateY(var(--rotationY)) rotateZ(var(--rotationZ));
        transition: 500ms ease;
    }

    .mouse-position-tracker:nth-child(1):hover ~ .tilting-card-body {
        --rotationX: var(--angle);
        --rotationY: calc(var(--angle) * -1);
        border-right: solid 2px lime;
        border-bottom: solid 2px lime;
    }
    .mouse-position-tracker:nth-child(2):hover ~ .tilting-card-body {
        --rotationX: var(--angle);
        border-bottom: solid 2px lime;
    }
    .mouse-position-tracker:nth-child(3):hover ~ .tilting-card-body {
        --rotationX: var(--angle);
        --rotationY: var(--angle);
        border-left: solid 2px lime;
        border-bottom: solid 2px lime;
    }
    .mouse-position-tracker:nth-child(4):hover ~ .tilting-card-body {
        --rotationY: calc(var(--angle) * -1 );
        border-right: solid 2px lime;
    }
    .mouse-position-tracker:nth-child(6):hover ~ .tilting-card-body {
        --rotationY: var(--angle);
        border-left: solid 2px lime;
    }
    .mouse-position-tracker:nth-child(7):hover ~ .tilting-card-body {
        --rotationX: calc(var(--angle) * -1);
        --rotationY: calc(var(--angle) * -1);
        border-top: solid 2px lime;
        border-right: solid 2px lime;
    }
    .mouse-position-tracker:nth-child(8):hover ~ .tilting-card-body {
        --rotationX: calc(var(--angle) * -1);
        border-top: solid 2px lime;
    }
    .mouse-position-tracker:nth-child(9):hover ~ .tilting-card-body {
        --rotationX: calc(var(--angle) * -1);
        --rotationY: var(--angle);
        border-top: solid 2px lime;
        border-left: solid 2px lime;

    }
</style>

<div class="page-header">
    <h1>
        <%= title %>
        <div class="page-header-underline"></div>
    </h1>
</div>


<div class="page-text-box">
        <h3><%= text_box_header %></h3>
        <p><%= text_box %></p>
    </div>
</div>


<div class="titlting-card-container">

    <div class="tilting-card-wrapper">
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="tilting-card-body">
            <h1>Product Card</h1>
            <p>Product Price</p>
            <!-- <div class="product-image">
                <img src="/images/products/1.png" alt="">
            </div> -->
        </div>
    </div>


    <div class="tilting-card-wrapper">
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="tilting-card-body">
            <h1>Product Card</h1>
            <p>Product Price</p>
            <!-- <div class="product-image">
                <img src="/images/products/1.png" alt="">
            </div> -->
        </div>
    </div>


    <div class="tilting-card-wrapper">
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="mouse-position-tracker"></div>
        <div class="tilting-card-body">
            <h1>Product Card</h1>
            <p>Product Price</p>
            <!-- <div class="product-image">
                <img src="/images/products/1.png" alt="">
            </div> -->
        </div>
    </div>


<div class="tilting-card-wrapper">
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="tilting-card-body">
        <h1>Product Card</h1>
        <p>Product Price</p>
        <!-- <div class="product-image">
                <img src="/images/products/1.png" alt="">
            </div> -->
    </div>
</div>


<div class="tilting-card-wrapper">
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="tilting-card-body">
        <h1>Product Card</h1>
        <p>Product Price</p>
        <!-- <div class="product-image">
                <img src="/images/products/1.png" alt="">
            </div> -->
    </div>
</div>
<div class="tilting-card-wrapper">
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="mouse-position-tracker"></div>
    <div class="tilting-card-body">
        <h1>Product Card</h1>
        <p>Product Price</p>
        <!-- <div class="product-image">
                <img src="/images/products/1.png" alt="">
            </div> -->
    </div>
</div>



</div>





<div class="page-horizontal-slider">

    <div class="product-card-container">
        <div class="product-card">
            <div class="product-image-container">
                <div class="product-image">
                    <img src="/images/products/1.png" alt="">
                </div>
                <div class="product-image-sleeve"></div>
            </div>
            <div class="product-data">
                <!-- <button class="purchase-button">Add To Cart</button> -->
                <a target="_blank" href="https://buy.stripe.com/test_7sI02E8Rnch26D6dQR">
                    <div class="product-name">
                        <h6>CannaWow</h6>
                    </div>
                    <div class="product-price">
                        <p>$105/oz</p>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="product-card-container">
        <div class="product-card">
            <div class="product-image-container">
                <div class="product-image">
                    <img src="/images/products/2.png" alt="">
                </div>
                <div class="product-image-sleeve"></div>
            </div>
            <div class="product-data">
                <a target="_blank" href="https://buy.stripe.com/test_8wM2aM0kR0yk1iM7ss">
                    <div class="product-name">
                        <h6>CannaWoah</h6>
                    </div>
                    <div class="product-price">
                        <p>$125/oz</p>
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="product-card-container">
        <div class="product-card">
            <div class="product-image-container">
                <div class="product-image">
                    <img src="/images/products/3.png" alt="">
                </div>
                <div class="product-image-sleeve"></div>
            </div>
            <div class="product-data">
                <a target="_blank" href="https://buy.stripe.com/test_28oaHid7D94Q3qU7su">
                    <div class="product-name">
                        <h6>CannaGetSmore</h6>
                    </div>
                    <div class="product-price">
                        <p>$115/oz</p>
                    </div>
                </a>
            </div>
        </div>
    </div>



</div>


<script>
    console.log('HELLO')
    const button = document.querySelector(".purchase-button")
    button.addEventListener("click", () => {
        console.log('CLICKED')
        fetch("http://localhost:3000/checkout/create-checkout-session", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                items: [
                    { id: 1, quantity: 3 },
                    { id: 2, quantity: 1 },
                    { id: 3, quantity: 5 },
                    { id: 1, quantity: 15 },
                ],
            }),
        })
            .then(res => {
                console.log(res)
                console.log(res.url)
                if (res.ok) {
                    return res.json()
                }
                return res.json().then(json => Promise.reject(json))
            })
            .then(({ url }) => {
                window.location = url
                console.log(items)
            })
            .catch(e => {
                console.error(e.error)
            })
    })
</script>